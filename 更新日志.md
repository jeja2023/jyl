# 更新日志 (ChangeLog)

## [1.2.0] - 2026-02-04

### ✨ 核心业务逻辑增强 (Core Business Logic)
- **个人统计系统实装**
    - 后端引入 `optionalAuth` 机制，支持在公开访问百科详情时同步记录登录用户的阅读量。
    - 修正“我的”页面“百科阅读”数据不真实的问题，实现阅读行为实时统计。
- **消息中心与自动化提醒**
    - 全新上线“消息中心”页面，整合系统公告与个人健康提醒。
    - 实现智能复查提醒逻辑：根据历史化验单时间点，自动预判并生成未来30天的复查日程提醒。
- **服药打卡看板**
    - 用药计划页改版，引入“服药打卡”按钮及今日状态标识，提升慢病管理依从性。
    - 后端记录 `lastTakenDate`，支持跨天状态重置。

### 🎨 登录系统与合规性重构 (Authentication & Compliance)
- **Premium 登录视觉方案**
    - 采用极简双选项卡（账号登录/手机注册）设计，配合品牌绿微信一键登录图标。
    - 增加登录页“弥散光影”动态背景，提升首屏高级感。
- **全平台预览支持**
    - 针对 H5 运行环境开发了“微信模拟登录”通道，跳过授权直接进入流程预览。
- **法务合规补齐**
    - 强制勾选《用户协议》与《隐私政策》后方可登录。
    - 新增独立协议页面：详细界定医疗免责范围、信息收集范围及账号注销权利。

### 🛠️ 性能与样式优化 (Stability & UI)
- **趋势图表升级**
    - 趋势页面图表支持动态缩放（Zoom），支持查看任意密度的数据点。
    - 新增“指标越位”视觉提示：数据值高于/低于参考值时，自动显示红色/橙色高亮及状态方向箭头。
- **首页动画修正**
    - 修复首页 Dashboard 引导图标旋转时圆周偏移的问题，改进 `transform` 动画层级。
- **数据库健壮性**
    - 后端启动时自动执行 SQL 碎片检查，自动注入缺失字段（如 `wikiReadCount`, `lastTakenDate`）。

## [1.1.0] - 2026-02-04

### ✨ 视觉与定位优化 (Design & Position)
- **定位明确与免责声明**
    - 明确应用定位为“甲状腺病友指标管理监测工具”，**非医疗器械**，不提供任何医疗诊断和建议。
    - **关于页面**：新增显著的“医疗免责声明”板块，重点提示医疗风险。
    - **首页提示**：在首页顶部新增常驻/滚动告警通知栏，强调非医疗用途。
    - **登录页优化**：底部及文案中加入免责提示，Logo Slogan 更新为“指标管理 · 趋势监测 · 经验交流”。
- **Logo 升级**
    - 重新设计项目 Logo，移除所有涉及“MEDICAL APP”的英文字样，采用纯图形化的蝴蝶（甲状腺抽象）与心形结合设计。
- **全站 UI/UX 深度重构**
    - **视觉规范**：统一全站圆角（40-50rpx）与品牌蓝（#3E7BFF）渐变系统。
    - **登录页**：采用弥散光影背景、玻璃拟态卡片，重塑微信登录品牌色。
    - **百科页**：优化分类导航平滑切换效果，文章卡片层级重构，详情页阅读排版升级。
    - **录入页**：新增指标录入进度条，网格化参数填写布局，OCR 识别反馈交互优化。
    - **用药页**：每日贴士升级为“沉浸式卡片”，时刻列表采用极简大文本设计，提升操作关怀感。

## [1.0.1] - 2026-02-01

### ✨ 新增功能 (Features)
- **后端**
    - 新增 `HealthTip` 数据库模型及 `HealthTipController`，支持健康贴士内容的动态管理。
    - 新增 `/api/tip/random` 接口，随机返回一条健康贴士，并具备种子数据自动初始化功能。
- **前端 (H5)**
    - 网络请求配置 (`request.js`) 增加智能判断逻辑：在 H5 环境下通过局域网访问时，自动将 `baseURL` 切换为当前 Host IP，无需手动修改代码即可实现手机连接电脑后端调试。
- **UI/UX**
    - **登录页**：界面改版，移除“QQ登录”，新增“手机登录”入口（预留接口），文案调整为“其他登录方式”。
    - **用药提醒**：每日贴士不再硬编码，改为从后端动态获取，增强内容可维护性。

### 🐛 问题修复 (Bug Fixes)
- **滚动体验优化**
    - **首页 (`index/index`)**：移除容器固定高度 `height: 100vh` 和 `overflow: hidden`，改为 `min-height`，解决内容溢出无法滚动的问题。
    - **趋势页 (`record/list`)**：重构布局，移除内层滚动容器，全面启用页面级原生滚动，提升移动端滑动流畅度。
    - **用药提醒页 (`medication/plan`)**：将 `scroll-view` 替换为普通 `view` 布局，解决在部分手机浏览器中列表高度塌陷、内容不显示的问题。
- **代码规范**
    - 修复 `index.vue` 和 `wiki/list.vue` 中 `line-clamp` 属性缺失标准写法导致的 IDE 语法警告。
    - 修复 `medication/plan.vue` 中因误删变量导致的 `plans is not defined` 运行时错误。
