# 甲友乐 JYL

> **⚠️ 重要声明：** 甲友乐是一款专为甲状腺病友设计的**指标管理与健康监测工具**。本应用不属于医疗器械，不具任何医疗诊断功能，亦不提供任何医疗建议。应用内所有内容（含百科、建议等）仅供参考，任何医疗决策均须咨询专业医师。

甲友乐旨在帮助用户更科学地管理历史指标、记录用药情况，通过可视化的趋势掌握健康状态，是您甲状腺健康管理的贴心助手。

## 项目结构

```
jyl/
├── client/          # 前端 (uni-app + Vue3)
│   ├── src/
│   │   ├── pages/       # 页面文件
│   │   ├── store/       # Pinia 状态管理
│   │   ├── utils/       # 工具函数
│   │   └── static/      # 静态资源
│   └── package.json
│
└── server/          # 后端 (Koa + Sequelize)
    ├── controllers/     # 控制器
    ├── models/          # 数据模型
    ├── middlewares/     # 中关件
    ├── routes/          # 路由
    ├── utils/           # 工具类
    └── package.json
```

## 📸 界面预览

*(此处可插入新版 UI 截图：如沉浸式登录、平滑趋势图、智能指标录入等)*

- 🩺 **指标管理 (非诊断)**：支持 TSH、FT3、FT4、TGAb 等完整指标录入，不仅是记录，更是档案。
- 📊 **指标趋势监测**：可视化折线图展示病程变化，新增**智能越位提醒**（偏高/偏低自动标记）与**动态缩放**支持。
- ⏰ **科学用药提醒 & 打卡**：专为优甲乐设计的空腹服药提醒，新增**今日已服药打卡**功能，闭环管理服药习惯。
- 📅 **智能复查计划**：基于历史化验单，系统自动预判并生成未来30天的**复查日程提醒**，不错过任何关键窗口期。
- 📮 **个人消息中心**：整合系统公告与健康计划，提供一站式的个人健康事务处理入口。
- 📚 **甲功百科交流**：通过 `optionalAuth` 技术，实现百科阅读量的**真实个人统计**。
- 📱 **Premium 认证系统**：
    *   微信小程序：支持**微信手机号一键登录**与微信快捷授权。
    *   H5/Web 预览：提供**微信模拟登录通道**，无需小程序即可体验全量功能及其业务闭环。
    *   法务合规：内置《用户协议》与《隐私政策》，强制勾选确认。

## 快速开始

### 环境要求

- Node.js >= 16
- MySQL >= 5.7

### 后端启动

```bash
cd server
npm install
# 配置 .env 文件
npm run dev
```

### 前端启动

```bash
cd client
npm install
npm run dev:h5      # H5 预览（支持局域网手机访问，带微信模拟登录）
npm run dev:mp-weixin  # 微信小程序
```

> **提示**：前端在 H5 模式下运行，点击“微信登录图标”将自动进入开发者模拟通道。

## 技术栈

**前端**
- Vue 3 + Composition API
- uni-app 跨平台框架
- uview-plus UI 组件库
- Pinia 状态管理

**后端**
- Koa 2 Web 框架
- Sequelize ORM (支持字段自动合并/SQL 自动修复)
- MySQL 数据库
- JWT 身份认证 (包含可选认证中间件)

## 更新日志

详情请参见 [更新日志.md](./更新日志.md)

## 许可证

MIT License
